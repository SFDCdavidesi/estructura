<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Autoevaluación EC - UAX</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #059669;
            --error: #dc2626;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            position: sticky;
            top: 0;
            background: var(--card);
            width: 100%;
            max-width: 600px;
            padding: 15px;
            border-bottom: 2px solid #e2e8f0;
            z-index: 100;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-radius: 0 0 12px 12px;
            margin-bottom: 20px;
        }

        .stat { text-align: center; }
        .stat-val { display: block; font-weight: bold; font-size: 1.2rem; }
        .stat-label { font-size: 0.75rem; color: #64748b; text-transform: uppercase; }

        .quiz-container {
            width: 100%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .q-card {
            background: var(--card);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
        }

        .unit-badge {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: inline-block;
        }

        .question-text {
            font-size: 1.05rem;
            font-weight: 600;
            line-height: 1.4;
            margin-bottom: 15px;
        }

        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            padding: 12px 16px;
            border: 2px solid #f1f5f9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: #f8fafc;
            font-size: 0.95rem;
        }

        .option:active { transform: scale(0.98); }

        .disabled { pointer-events: none; }

        .correct {
            background-color: #dcfce7 !important;
            border-color: var(--success) !important;
            color: #064e3b !important;
        }

        .wrong {
            background-color: #fee2e2 !important;
            border-color: var(--error) !important;
            color: #7f1d1d !important;
        }

        pre {
            background: #f1f5f9;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.85rem;
            overflow-x: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="stat">
            <span class="stat-val" id="hits">0</span>
            <span class="stat-label">Aciertos</span>
        </div>
        <div class="stat">
            <span class="stat-val" id="fails">0</span>
            <span class="stat-label">Fallos</span>
        </div>
        <div class="stat">
            <span class="stat-val" id="current">0</span>
            <span class="stat-label">Progreso</span>
        </div>
    </div>

    <div class="quiz-container" id="quiz-box"></div>

    <script>
        const questions = [
            // UD1
            {u:"UD1", q:"Los transistores pertenecen a la generación de computadores...", o:["Tercera.", "Primera.", "Cuarta.", "Segunda."], c:3},
            {u:"UD1", q:"En una memoria:", o:["Tantos bits almacenados como 2^líneas.", "La cantidad total de datos almacenada es potencia de 2.", "En cada posición hay un dato útil.", "Número de posiciones es 2^bits de entrada."], c:1},
            {u:"UD1", q:"Para un sistema empotrado, ¿qué arquitectura recomendarías?", o:["Macintosh.", "Harvard.", "Von Neumann.", "Servidor Windows."], c:1},
            {u:"UD1", q:"Respecto a la arquitectura: Es von Neumann si...", o:["El bus de datos y el de instrucciones es compartido.", "Datos y control comparten bus.", "Instrucciones tienen mismo tamaño que datos.", "Ancho de palabra no es igual a instrucción."], c:0},
            {u:"UD1", q:"Una memoria volátil se caracteriza por:", o:["Almacenar datos.", "Perder la información si se interrumpe el flujo eléctrico.", "No necesitar energía.", "Ninguna."], c:1},
            {u:"UD1", q:"El registro de instrucción...", o:["Contiene valores de ejecución.", "Ninguna de las otras respuestas.", "Siguiente instrucción en ensamblador.", "Actual instrucción en ensamblador."], c:1},
            {u:"UD1", q:"Arquitectura Harvard es si...", o:["Las instrucciones pueden tener distinto tamaño que los datos.", "Instrucciones no pueden tener distinto tamaño.", "Bus de datos e instrucciones bidireccionales.", "Mismo bus para control que datos."], c:0},
            {u:"UD1", q:"El CP (contador de programa), ¿a dónde apunta?", o:["A la siguiente instrucción.", "A la instrucción en curso.", "A la instrucción previa.", "Ninguna."], c:0},
            {u:"UD1", q:"El lenguaje máquina...", o:["Ninguna.", "Bajo nivel.", "Muy alto nivel.", "Alto nivel."], c:1},
            {u:"UD1", q:"La primera generación usó:", o:["Circuitos integrados.", "Tubos al vacío.", "Transistores.", "Chips."], c:1},

            // UD2
            {u:"UD2", q:"Sobre el reloj: Es difícil comparar...", o:["Dos procesadores de arquitecturas distintas.", "Frecuencia más alta es siempre más rápido.", "Señal sinusoidal 0-5V.", "Más MIPS es siempre más rápido."], c:0},
            {u:"UD2", q:"Respecto al CPI:", o:["A mayor CPI menos MIPS.", "Más ciclos es siempre más lento.", "Depende de frecuencia.", "Todas duran lo mismo."], c:0},
            {u:"UD2", q:"MIPS con 2 MHz y 3 instrucciones/ciclo:", o:["6.", "3/2.", "No se sabe.", "2000/3."], c:0},
            {u:"UD2", q:"Señala la FALSA:", o:["MIPS dependen de frecuencia.", "MIPS son millones de instr/seg.", "Velocidad de reloj permite comparar arquitecturas.", "Promediar ciclos para CPI medio."], c:2},
            {u:"UD2", q:"Señala la verdadera:", o:["Paralelismo antes de ejecución.", "Superescalares compatibles con escalares.", "Superescalar grado m tiene CPI m.", "Superescalares en tareas intensivas de cálculo."], c:3},
            {u:"UD2", q:"Un ciclo de 1 ns son:", o:["10 G.", "1 G.", "No se sabe.", "2 G."], c:1},
            {u:"UD2", q:"Sobre CPI: No aporta nada sobre...", o:["Subida con menos frecuencia.", "Subida con más frecuencia.", "Rapidez de ejecución de programas.", "Dependencia del programa."], c:2},
            {u:"UD2", q:"Los MFLOPS:", o:["Parámetro universal.", "Más MFLOPS es siempre más rápido.", "Están relacionados con el CPI.", "Miden todo tipo de operaciones."], c:2},
            {u:"UD2", q:"Señala la FALSA: Los multicomputadores...", o:["Tienen memoria compartida.", "Trabajan sobre vectores.", "Ahorran bucles.", "Requieren gran ancho de banda."], c:0},
            {u:"UD2", q:"Dependencias en segmentación:", o:["Se soluciona con instrucciones NOP.", "Solo hardware.", "Solo software.", "Reordenar soluciona siempre."], c:0},

            // UD3
            {u:"UD3", q:"Lenguaje ensamblador:", o:["Poco parecido entre procesadores.", "Igual a código máquina.", "Bajo nivel por cercanía al hardware.", "Uso corriente."], c:2},
            {u:"UD3", q:"Característica MIPS32:", o:["Sin aritmética.", "Juego complejo.", "Conjunto reducido de instrucciones.", "CISC."], c:2},
            {u:"UD3", q:"Sumar dos registros en MIPS32:", o:["SUB", "ADD", "DIV", "MUL"], c:1},
            {u:"UD3", q:"Registro base + desplazamiento es:", o:["Inmediato.", "Directo a registro.", "Implícito.", "Indirecto a registro con desplazamiento."], c:3},
            {u:"UD3", q:"Señala la verdadera: Código máquina en memoria...", o:["Trabaja en ensamblador.", "Procesador lo ejecuta sin compilador.", "Da código alto nivel.", "Se escribe en máquina."], c:1},
            {u:"UD3", q:"Little Endian:", o:["Sin orden.", "Aleatorio.", "Byte menos significativo en 1ª posición.", "Byte más significativo en 1ª posición."], c:2},
            {u:"UD3", q:"Verdadera MIPS32:", o:["CISC", "Periféricos como registros.", "Arquitectura carga/almacenamiento.", "Cualquier modo."], c:2},
            {u:"UD3", q:"Pseudoinstrucción MIPS32:", o:["Correspondencia directa máquina.", "Modo kernel.", "Ensamblador traduce a una o más máquina.", "Sin binario."], c:2},
            {u:"UD3", q:"Ensamblador: Muy parecido entre procesadores...", o:["Sin eficiencia.", "Aunque depende de arquitectura.", "Fácil de programar.", "Sin preocuparse arquitectura."], c:1},
            {u:"UD3", q:"Procesador MIPS32: Modo kernel es...", o:["Sin registros para sumar.", "Ancho 2 bytes.", "Más permisos sobre hardware.", "Códigos complejos."], c:2},

            // UD4
            {u:"UD4", q:"¿Qué hace 'mul $t2, $t0, $t1'?", o:["Multiplica a y b en c.", "Suma a y b.", "Divide a por b.", "Resta b de a."], c:0},
            {u:"UD4", q:"Instrucción 'lb' en MIPS32:", o:["Almacena byte.", "Carga palabra.", "Carga byte extendiendo signo.", "Almacena palabra."], c:2},
            {u:"UD4", q:"¿Qué hace 'sub $t2, $t0, $t1'?", o:["Divide.", "Resta b de a en c.", "Multiplica.", "Suma."], c:1},
            {u:"UD4", q:"Cargar byte con ceros (sin signo):", o:["lbu", "lw", "lb", "sb"], c:0},
            {u:"UD4", q:"beq/bne con equal: li $t2, 1:", o:["0 si iguales.", "Suma x e y.", "1 si iguales, sino 0.", "Resta."], c:2},
            {u:"UD4", q:"Cargar palabra desde memoria:", o:["lb", "sb", "sw", "lw"], c:3},
            {u:"UD4", q:"Cargar valor inmediato:", o:["sw", "sb", "li", "lw"], c:2},
            {u:"UD4", q:"Formato instrucciones MIPS32:", o:["Variable 8-32.", "Variable 16-64.", "Fijo 64.", "Fijo 32 bits."], c:3},
            {u:"UD4", q:"Almacenar byte registro -> memoria:", o:["sw", "sb", "lb", "lw"], c:1},
            {u:"UD4", q:"'div' y 'mfhi $t2' hace:", o:["Suma.", "Divide y almacena residuo.", "Cociente.", "Resta."], c:1},

            // UD5
            {u:"UD5", q:"Unidad de control:", o:["E/S datos.", "Gestiona y coordina operaciones.", "Almacena.", "Aritmética."], c:1},
            {u:"UD5", q:"Verdadera MIPS32:", o:["24 registros.", "Cualquier modo.", "Ancho bus direcciones 4 bytes.", "Palabra 8 bytes."], c:2},
            {u:"UD5", q:"La unidad de control:", o:["Combinacional.", "Sin ruta datos.", "Cambia salto según ruta datos.", "Sin reloj."], c:2},
            {u:"UD5", q:"Reloj del procesador:", o:["Sinusoidal.", "Cualquier velocidad.", "Diente sierra.", "Señal cuadrada (0 y 1)."], c:3},
            {u:"UD5", q:"Un ciclo de 1 ns son:", o:["2 G.", "No se sabe.", "10 G.", "1 G de frecuencia."], c:3},
            {u:"UD5", q:"Bus de comunicación:", o:["Almacenamiento.", "RAM.", "Líneas transmisión hardware.", "E/S."], c:2},
            {u:"UD5", q:"Fase FETCH:", o:["Ejecuta.", "Decodifica.", "Almacena.", "Busca instrucción en memoria principal."], c:3},
            {u:"UD5", q:"Sobre fase Fetch:", o:["Carga en memoria.", "Carga de memoria.", "Sin memoria.", "Banco registros."], c:1},
            {u:"UD5", q:"Ruta de datos:", o:["Secuencial.", "Contiene registros.", "Máquina Moore.", "Sin ayuda."], c:1},
            {u:"UD5", q:"ALU:", o:["Con memoria.", "Zero pone a cero.", "Bits Op indican operación.", "Solo con registros."], c:3},

            // UD6
            {u:"UD6", q:"Memoria volátil:", o:["Pierde datos al apagar.", "Solo caché.", "Retiene sin energía.", "Externa."], c:0},
            {u:"UD6", q:"Fallo de caché:", o:["Permanente.", "Bloque no encontrado en caché.", "Sin refresco.", "Ya en caché."], c:1},
            {u:"UD6", q:"Más rápida, cara y menor densidad:", o:["SRAM.", "Flash.", "DRAM.", "Magnética."], c:0},
            {u:"UD6", q:"Acceso a datos cercanos:", o:["Temporal.", "Directo.", "Aleatorio.", "Localidad espacial."], c:3},
            {u:"UD6", q:"FALSA módulo E/S:", o:["Gestiona periférico.", "Nunca almacena datos.", "Control y tiempo.", "Gestiona CPU."], c:1},
            {u:"UD6", q:"Memoria volátil:", o:["Flash.", "ROM.", "Discos.", "RAM."], c:3},
            {u:"UD6", q:"Reemplazo caché al azar:", o:["LRU.", "Directo.", "Aleatorio.", "FIFO."], c:2},
            {u:"UD6", q:"Sobre el programa:", o:["Lee disco.", "Compila disco.", "Lee instrucciones de memoria principal.", "Alto nivel siempre."], c:2},
            {u:"UD6", q:"Externa, alta capacidad y bajo costo:", o:["Óptica.", "Semiconductores.", "Magneto-óptica.", "Magnética."], c:3},
            {u:"UD6", q:"Característica caché:", o:["Externa.", "Lenta.", "Permanente.", "Temporal datos frecuentes."], c:3}
        ];

        let hits = 0, fails = 0, done = 0;

        function render() {
            const box = document.getElementById('quiz-box');
            questions.forEach((data, i) => {
                const card = document.createElement('div');
                card.className = 'q-card';
                card.innerHTML = `
                    <span class="unit-badge">${data.u}</span>
                    <div class="question-text"><strong>${i+1}.</strong> ${data.q}</div>
                    <div class="options-grid" id="opts-${i}">
                        ${data.o.map((opt, oi) => `
                            <div class="option" onclick="check(${i}, ${oi})">${opt}</div>
                        `).join('')}
                    </div>
                `;
                box.appendChild(card);
            });
        }

        window.check = (qi, oi) => {
            const container = document.getElementById(`opts-${qi}`);
            if(container.classList.contains('disabled')) return;
            
            const options = container.querySelectorAll('.option');
            const correct = questions[qi].c;
            
            if(oi === correct) {
                options[oi].classList.add('correct');
                hits++;
            } else {
                options[oi].classList.add('wrong');
                options[correct].classList.add('correct');
                fails++;
            }
            
            done++;
            container.classList.add('disabled');
            document.getElementById('hits').innerText = hits;
            document.getElementById('fails').innerText = fails;
            document.getElementById('current').innerText = done;
        };

        render();
    </script>
</body>
</html>