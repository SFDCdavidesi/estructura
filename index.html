<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UAX - Estructura de Computadores (Oficial)</title>
    <style>
        :root {
            --primary: #2563eb;
            --success: #059669;
            --error: #dc2626;
            --bg: #f1f5f9;
            --card: #ffffff;
            --text: #0f172a;
        }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header {
            position: sticky;
            top: 0;
            background: var(--card);
            width: 100%;
            max-width: 500px;
            padding: 15px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            z-index: 1000;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat { text-align: center; }
        .stat-val { display: block; font-weight: 800; font-size: 1.2rem; }
        .stat-label { font-size: 0.7rem; color: #64748b; text-transform: uppercase; }

        .shuffle-btn {
            grid-column: span 3;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .quiz-container { width: 100%; max-width: 500px; }

        .q-card {
            background: var(--card);
            padding: 18px;
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .unit-badge {
            background: #e2e8f0;
            color: #475569;
            padding: 2px 8px;
            border-radius: 5px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        .question-text {
            font-size: 1rem;
            font-weight: 600;
            margin: 12px 0;
            line-height: 1.4;
        }

        .option {
            padding: 12px;
            border: 2px solid #f1f5f9;
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            background: #fdfdfd;
        }

        .disabled { pointer-events: none; }
        .correct { background: #dcfce7 !important; border-color: var(--success) !important; color: #166534; }
        .wrong { background: #fee2e2 !important; border-color: var(--error) !important; color: #991b1b; }

        #results-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(0,0,0,0.3);
            text-align: center;
            z-index: 2000;
            width: 80%;
            max-width: 400px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1999;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="stat"><span class="stat-val" id="hits">0</span><span class="stat-label">Aciertos</span></div>
        <div class="stat"><span class="stat-val" id="fails">0</span><span class="stat-label">Fallos</span></div>
        <div class="stat"><span class="stat-val" id="current">0/60</span><span class="stat-label">Progreso</span></div>
        <button class="shuffle-btn" onclick="initQuiz()"> Mezclar y Reiniciar</button>
    </div>

    <div class="quiz-container" id="quiz-box"></div>

    <div class="overlay" id="overlay"></div>
    <div id="results-modal">
        <h2> 隆Fin del Test!</h2>
        <div id="final-stats" style="margin: 20px 0; line-height: 2;"></div>
        <button class="shuffle-btn" onclick="initQuiz(); document.getElementById('results-modal').style.display='none'; document.getElementById('overlay').style.display='none';"> Volver a intentar</button>
    </div>

    <script>
        const rawQuestions = [
            // UD1
            {u:"UD1", q:"Los transistores pertenecen a la generaci贸n de computadores:", o:["Tercera.", "Primera.", "Cuarta.", "Segunda."], c:3},
            {u:"UD1", q:"En una memoria, el n煤mero de posiciones de memoria que se pueden direccionar viene dado por:", o:["La cantidad de bits de los datos almacenados.", "2 elevado al n煤mero de bits del bus de direcciones.", "La velocidad del reloj.", "El n煤mero de registros de la CPU."], c:1},
            {u:"UD1", q:"Si nos piden dise帽ar una computadora para un sistema empotrado, 驴qu茅 arquitectura recomendar铆as?", o:["Arquitectura de Von Neumann.", "Arquitectura Harvard.", "Arquitectura de un Macintosh.", "Arquitectura de un servidor Windows."], c:1},
            {u:"UD1", q:"Una arquitectura es de Von Neumann si el bus de datos y el de instrucciones es compartido:", o:["Verdadero.", "Falso.", "Es Harvard si comparten bus.", "Depende del fabricante."], c:0},
            {u:"UD1", q:"Una memoria vol谩til se caracteriza por:", o:["Mantiene la informaci贸n sin energ铆a el茅ctrica.", "Se pierde la informaci贸n si se interrumpe el flujo el茅ctrico.", "Es una memoria de solo lectura.", "Se utiliza para el almacenamiento masivo a largo plazo."], c:1},
            {u:"UD1", q:"El registro de instrucci贸n contiene:", o:["La direcci贸n de la siguiente instrucci贸n.", "La instrucci贸n que se est谩 ejecutando actualmente.", "Los datos de entrada de la ALU.", "El resultado de la 煤ltima operaci贸n."], c:1},
            {u:"UD1", q:"Es Harvard si las instrucciones pueden tener distinto tama帽o que los datos:", o:["Verdadero.", "Falso.", "Solo ocurre en Von Neumann.", "Ninguna de las anteriores."], c:0},
            {u:"UD1", q:"El contador de programa (CP) apunta a:", o:["La instrucci贸n en curso.", "La siguiente instrucci贸n a ejecutar.", "La instrucci贸n previa.", "La direcci贸n de inicio de la memoria."], c:1},
            {u:"UD1", q:"El lenguaje m谩quina se caracteriza por:", o:["Ser un lenguaje de alto nivel.", "Ser un lenguaje de bajo nivel directamente entendible por el hardware.", "Utilizar palabras en ingl茅s para las instrucciones.", "Necesitar un int茅rprete para ejecutarse."], c:1},
            {u:"UD1", q:"La primera generaci贸n de computadores se caracteriz贸 por usar:", o:["Circuitos integrados.", "Tubos al vac铆o.", "Transistores.", "Microprocesadores."], c:1},

            // UD2
            {u:"UD2", q:"Respecto al reloj: Es dif铆cil comparar dos procesadores de dos arquitecturas distintas bas谩ndose solo en la frecuencia.", o:["Verdadero.", "Falso.", "Solo es posible con MIPS.", "Solo es posible con MFLOPS."], c:0},
            {u:"UD2", q:"Respecto al CPI (Ciclos Por Instrucci贸n): A mayor CPI:", o:["Mayor es el n煤mero de MIPS.", "Menor es el n煤mero de MIPS.", "La ejecuci贸n es siempre m谩s r谩pida.", "No influye en el rendimiento."], c:1},
            {u:"UD2", q:"Si un procesador tiene una frecuencia de 2 MHz y una media de 3 ciclos por instrucci贸n, 驴cu谩ntos MIPS alcanza?", o:["6 MIPS.", "0.66 MIPS.", "1.5 MIPS.", "No se puede calcular."], c:1},
            {u:"UD2", q:"Se帽ala la respuesta FALSA sobre el rendimiento:", o:["El tiempo de ejecuci贸n es la medida m谩s fiable.", "La velocidad de reloj permite comparar arquitecturas distintas directamente.", "El CPI depende de la organizaci贸n del procesador.", "MIPS mide millones de instrucciones por segundo."], c:1},
            {u:"UD2", q:"Los procesadores superescalares permiten:", o:["Ejecutar m谩s de una instrucci贸n por ciclo de reloj.", "Aumentar la memoria RAM del sistema.", "Reducir el consumo el茅ctrico a cero.", "Eliminar la necesidad de buses de datos."], c:0},
            {u:"UD2", q:"Un ciclo de reloj de 1 nanosegundo (ns) corresponde a una frecuencia de:", o:["10 GHz.", "1 GHz.", "100 MHz.", "1 MHz."], c:1},
            {u:"UD2", q:"El CPI (Ciclos Por Instrucci贸n) de un programa depende de:", o:["Solo de la frecuencia de reloj.", "Del repertorio de instrucciones y la organizaci贸n del procesador.", "nicamente del lenguaje de programaci贸n.", "Del tama帽o del disco duro."], c:1},
            {u:"UD2", q:"Los MFLOPS (Millones de Operaciones de Punto Flotante por Segundo) miden:", o:["El rendimiento en operaciones de enteros.", "El rendimiento en c谩lculos matem谩ticos complejos.", "La velocidad de acceso a disco.", "La capacidad de la memoria cach茅."], c:1},
            {u:"UD2", q:"驴Cu谩l de las siguientes afirmaciones es FALSA sobre los multicomputadores?", o:["Cada nodo tiene su propia memoria local.", "Tienen memoria compartida global.", "Se comunican mediante paso de mensajes.", "Son sistemas escalables."], c:1},
            {u:"UD2", q:"En la segmentaci贸n (pipelining), las dependencias de datos pueden solucionarse mediante:", o:["Inserci贸n de instrucciones NOP o adelantamiento (forwarding).", "Aumentando el voltaje del procesador.", "Reduciendo el n煤mero de registros.", "Cambiando a arquitectura Harvard."], c:0},

            // UD3
            {u:"UD3", q:"El lenguaje ensamblador se considera de bajo nivel porque:", o:["Es muy f谩cil de aprender para humanos.", "Est谩 muy cerca de la arquitectura f铆sica del hardware.", "No permite realizar operaciones matem谩ticas.", "Se utiliza solo para aplicaciones web."], c:1},
            {u:"UD3", q:"La arquitectura MIPS32 se define como una arquitectura de tipo:", o:["CISC (Complex Instruction Set Computer).", "RISC (Reduced Instruction Set Computer).", "VLIW.", "De flujo de datos."], c:1},
            {u:"UD3", q:"驴Qu茅 instrucci贸n MIPS32 se utiliza para realizar una suma?", o:["SUB.", "ADD.", "LOAD.", "STORE."], c:1},
            {u:"UD3", q:"El direccionamiento indirecto a registro con desplazamiento utiliza:", o:["Un registro base y un valor inmediato (offset).", "Dos registros sumados.", "Solo una direcci贸n de memoria directa.", "Solo un valor inmediato."], c:0},
            {u:"UD3", q:"El c贸digo m谩quina almacenado en memoria se caracteriza por:", o:["Estar escrito en lenguaje C.", "Ser una secuencia binaria que la CPU ejecuta directamente.", "Necesitar un compilador en tiempo de ejecuci贸n.", "Ser independiente de la arquitectura del procesador."], c:1},
            {u:"UD3", q:"En un sistema Little Endian:", o:["El byte m谩s significativo se guarda en la direcci贸n m谩s baja.", "El byte menos significativo se guarda en la direcci贸n m谩s baja.", "Los datos se guardan de forma aleatoria.", "No se utilizan bytes."], c:1},
            {u:"UD3", q:"MIPS32 utiliza una arquitectura de carga/almacenamiento (load/store), lo que significa que:", o:["Las operaciones aritm茅ticas pueden usar operandos en memoria directamente.", "Solo las instrucciones de carga y almacenamiento acceden a la memoria principal.", "No existe la memoria RAM.", "No se necesitan registros."], c:1},
            {u:"UD3", q:"Una pseudoinstrucci贸n en ensamblador es:", o:["Una instrucci贸n ilegal que detiene el procesador.", "Una instrucci贸n simplificada que el ensamblador traduce a instrucciones reales.", "Una instrucci贸n que solo entiende el usuario.", "Un comentario en el c贸digo."], c:1},
            {u:"UD3", q:"El lenguaje ensamblador es espec铆fico para cada arquitectura de procesador:", o:["Verdadero.", "Falso.", "Es universal para todos los procesadores.", "Solo depende del sistema operativo."], c:0},
            {u:"UD3", q:"En MIPS32, el modo kernel permite:", o:["Ejecutar cualquier instrucci贸n y acceder a todo el hardware.", "Restringir el acceso a la memoria.", "Solo ejecutar aplicaciones de usuario.", "Apagar el procesador."], c:0},

            // UD4
            {u:"UD4", q:"La instrucci贸n 'mul $t2, $t0, $t1' en MIPS32:", o:["Suma t0 y t1.", "Multiplica t0 por t1 y guarda el resultado en t2.", "Resta t1 de t0.", "Divide t0 entre t1."], c:1},
            {u:"UD4", q:"La instrucci贸n 'lb' (load byte) en MIPS32:", o:["Carga un byte y rellena con ceros.", "Carga un byte y extiende el signo al resto del registro.", "Guarda un registro en un byte de memoria.", "Carga una palabra de 32 bits."], c:1},
            {u:"UD4", q:"La instrucci贸n 'sub $t2, $t0, $t1' realiza:", o:["t2 = t0 + t1.", "t2 = t0 - t1.", "t2 = t1 - t0.", "t0 = t1 - t2."], c:1},
            {u:"UD4", q:"Para cargar un byte de memoria sin extender el signo (rellenando con ceros) se usa:", o:["lb.", "lw.", "lbu.", "sb."], c:2},
            {u:"UD4", q:"Las instrucciones 'beq' y 'bne' se utilizan para:", o:["Saltos incondicionales.", "Saltos condicionales basados en una comparaci贸n.", "Operaciones aritm茅ticas.", "Acceso a memoria."], c:1},
            {u:"UD4", q:"驴Qu茅 instrucci贸n carga una palabra completa (32 bits) de memoria a un registro?", o:["lb.", "sb.", "sw.", "lw."], c:3},
            {u:"UD4", q:"Para cargar un valor constante (inmediato) en un registro se usa la instrucci贸n:", o:["sw.", "li.", "lw.", "add."], c:1},
            {u:"UD4", q:"El formato de las instrucciones en MIPS32 es:", o:["Variable (de 8 a 64 bits).", "Fijo de 32 bits.", "Fijo de 16 bits.", "Depende de la instrucci贸n."], c:1},
            {u:"UD4", q:"La instrucci贸n 'sb' (store byte) sirve para:", o:["Cargar un byte de memoria.", "Almacenar el byte menos significativo de un registro en memoria.", "Sumar un byte.", "Saltar a una direcci贸n."], c:1},
            {u:"UD4", q:"La combinaci贸n de 'div' y 'mfhi' permite obtener:", o:["El cociente de la divisi贸n.", "El resto (residuo) de la divisi贸n.", "La suma de los operandos.", "El valor absoluto."], c:1},

            // UD5
            {u:"UD5", q:"La Unidad de Control tiene como funci贸n principal:", o:["Realizar c谩lculos aritm茅ticos.", "Gestionar y coordinar todas las operaciones del computador.", "Almacenar los datos permanentemente.", "Conectar el rat贸n y el teclado."], c:1},
            {u:"UD5", q:"En MIPS32, el ancho del bus de direcciones es de:", o:["16 bits.", "32 bits (4 bytes).", "64 bits.", "8 bits."], c:1},
            {u:"UD5", q:"La Unidad de Control es una m谩quina de estados finitos que:", o:["No depende del reloj.", "Genera se帽ales de control basadas en la instrucci贸n actual.", "Solo funciona con arquitectura Harvard.", "No puede realizar saltos."], c:1},
            {u:"UD5", q:"La se帽al de reloj en un procesador es:", o:["Una se帽al anal贸gica variable.", "Una se帽al cuadrada que sincroniza las operaciones.", "La que indica la hora del sistema.", "Una se帽al de audio."], c:1},
            {u:"UD5", q:"Si un ciclo de reloj dura 1 nanosegundo, la frecuencia de trabajo es:", o:["100 MHz.", "1 GHz.", "2 GHz.", "10 GHz."], c:1},
            {u:"UD5", q:"Un bus se define como:", o:["Un registro de gran tama帽o.", "L铆neas de transmisi贸n compartidas para comunicaci贸n entre componentes hardware.", "Un programa de gesti贸n de datos.", "La memoria cach茅 L1."], c:1},
            {u:"UD5", q:"La fase de FETCH (B煤squeda) consiste en:", o:["Ejecutar la operaci贸n en la ALU.", "Traer la instrucci贸n desde la memoria principal al procesador.", "Escribir el resultado en el disco.", "Decodificar el c贸digo de operaci贸n."], c:1},
            {u:"UD5", q:"Durante la fase de ejecuci贸n, la ALU:", o:["Busca la siguiente instrucci贸n.", "Realiza la operaci贸n aritm茅tica o l贸gica indicada.", "Carga datos del teclado.", "Guarda la instrucci贸n en el CP."], c:1},
            {u:"UD5", q:"La ruta de datos (datapath) incluye:", o:["Solo los cables externos.", "Los registros, la ALU y los buses internos.", "nicamente el monitor.", "El sistema operativo."], c:1},
            {u:"UD5", q:"驴Puede la ALU operar con datos que no est茅n en registros en una arquitectura Load/Store?", o:["S铆, directamente desde memoria.", "No, los datos deben estar previamente cargados en registros.", "Solo si es una suma.", "Solo en modo kernel."], c:1},

            // UD6
            {u:"UD6", q:"La memoria vol谩til pierde su contenido cuando:", o:["Se llena la capacidad.", "Se desconecta la alimentaci贸n el茅ctrica.", "Se accede a ella muchas veces.", "Se utiliza un antivirus."], c:1},
            {u:"UD6", q:"Un 'fallo de cach茅' (cache miss) ocurre cuando:", o:["La memoria RAM est谩 rota.", "El dato solicitado no se encuentra en la memoria cach茅.", "El procesador va demasiado r谩pido.", "La cach茅 es m谩s grande que la RAM."], c:1},
            {u:"UD6", q:"De las siguientes, 驴cu谩l es la memoria m谩s r谩pida y costosa por bit?", o:["DRAM.", "SRAM (usada en cach茅).", "Memoria Flash.", "Disco duro magn茅tico."], c:1},
            {u:"UD6", q:"El principio de localidad espacial indica que:", o:["Si se accede a un dato, es probable que se acceda a datos en direcciones cercanas pr贸ximamente.", "Los datos se borran despu茅s de usarlos.", "Solo se puede acceder a la memoria de forma aleatoria.", "La CPU est谩 lejos de la memoria."], c:0},
            {u:"UD6", q:"Se帽ala la afirmaci贸n FALSA sobre los m贸dulos de Entrada/Salida:", o:["Act煤an como interfaz entre la CPU y los perif茅ricos.", "Nunca disponen de memoria interna para almacenamiento temporal.", "Se encargan de la detecci贸n de errores en la transmisi贸n.", "Gestionan la temporizaci贸n y el control."], c:1},
            {u:"UD6", q:"La memoria RAM se clasifica como:", o:["Memoria no vol谩til.", "Memoria vol谩til de acceso aleatorio.", "Memoria de solo lectura.", "Almacenamiento secundario."], c:1},
            {u:"UD6", q:"Reemplazo aleatorio: Selecciona al azar el bloque que va a ser reemplazado de entre todos los bloques que hay en la memoria cach茅:", o:["Cierto.", "Falso.", "Solo en LRU.", "Solo en FIFO."], c:0},
            {u:"UD6", q:"Los programas se ejecutan cargando sus instrucciones en:", o:["El disco duro.", "La memoria principal.", "El bus de datos 煤nicamente.", "La unidad de CD-ROM."], c:1},
            {u:"UD6", q:"驴Qu茅 tipo de almacenamiento ofrece alta capacidad a bajo coste pero es m谩s lento?", o:["Registros de CPU.", "Memoria cach茅.", "Memoria secundaria (Discos).", "Memoria SRAM."], c:2},
            {u:"UD6", q:"La memoria cach茅 sirve para:", o:["Aumentar la capacidad total de la RAM.", "Reducir el tiempo medio de acceso a los datos de memoria principal.", "Guardar archivos de forma permanente.", "Enfriar el procesador."], c:1}
        ];

        let questions = [];
        let hits = 0, fails = 0, done = 0;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function initQuiz() {
            questions = JSON.parse(JSON.stringify(rawQuestions));
            shuffle(questions);
            hits = 0; fails = 0; done = 0;
            updateStats();
            render();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function updateStats() {
            document.getElementById('hits').innerText = hits;
            document.getElementById('fails').innerText = fails;
            document.getElementById('current').innerText = `${done}/${questions.length}`;
        }

        function render() {
            const box = document.getElementById('quiz-box');
            box.innerHTML = '';
            questions.forEach((data, i) => {
                const card = document.createElement('div');
                card.className = 'q-card';
                card.innerHTML = `
                    <span class="unit-badge">${data.u}</span>
                    <div class="question-text"><strong>${i+1}.</strong> ${data.q}</div>
                    <div class="options-container" id="opts-${i}">
                        ${data.o.map((opt, oi) => `<div class="option" onclick="check(${i}, ${oi})">${opt}</div>`).join('')}
                    </div>
                `;
                box.appendChild(card);
            });
        }

        window.check = (qi, oi) => {
            const container = document.getElementById(`opts-${qi}`);
            if(container.classList.contains('disabled')) return;
            
            const options = container.querySelectorAll('.option');
            const correct = questions[qi].c;
            
            if(oi === correct) {
                options[oi].classList.add('correct');
                hits++;
            } else {
                options[oi].classList.add('wrong');
                options[correct].classList.add('correct');
                fails++;
            }
            
            done++;
            container.classList.add('disabled');
            updateStats();

            if(done === questions.length) showFinalResults();
        };

        function showFinalResults() {
            const grade = ((hits / questions.length) * 10).toFixed(2);
            document.getElementById('final-stats').innerHTML = `
                <div style="font-size: 1.1rem">
                    Aciertos: <span style="color:var(--success)">${hits}</span><br>
                    Fallos: <span style="color:var(--error)">${fails}</span><br>
                    Nota Final: <span style="font-size:2rem; font-weight:bold">${grade} / 10</span>
                </div>
            `;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('results-modal').style.display = 'block';
        }

        initQuiz();
    </script>
</body>
</html>